<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="431px" preserveAspectRatio="none" style="width:457px;height:431px;" version="1.1" viewBox="0 0 457 431" width="457px" zoomAndPan="magnify"><defs><filter height="300%" id="f18yh8xu9tn665" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="396" x="32.5" y="16.708">Observer pattern using Smart pointers</text><!--MD5=[706371339d94ae8c95bd67c125269c47]
cluster std--><polygon fill="#FFFFFF" filter="url(#f18yh8xu9tn665)" points="298,36.9531,329,36.9531,336,59.25,424,59.25,424,103.9531,298,103.9531,298,36.9531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="298" x2="336" y1="59.25" y2="59.25"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="302" y="51.9482">std</text><!--MD5=[a4d13bcee5ae532e816c00a5435af7eb]
class std.shared_ptr--><rect fill="#FEFECE" filter="url(#f18yh8xu9tn665)" height="32" id="std.shared_ptr" style="stroke: #A80036; stroke-width: 1.5;" width="111" x="305.5" y="63.9531"/><ellipse cx="320.5" cy="79.9531" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M323.4688,85.5938 Q322.8906,85.8906 322.25,86.0313 Q321.6094,86.1875 320.9063,86.1875 Q318.4063,86.1875 317.0781,84.5469 Q315.7656,82.8906 315.7656,79.7656 Q315.7656,76.6406 317.0781,74.9844 Q318.4063,73.3281 320.9063,73.3281 Q321.6094,73.3281 322.25,73.4844 Q322.9063,73.6406 323.4688,73.9375 L323.4688,76.6563 Q322.8438,76.0781 322.25,75.8125 Q321.6563,75.5313 321.0313,75.5313 Q319.6875,75.5313 319,76.6094 Q318.3125,77.6719 318.3125,79.7656 Q318.3125,81.8594 319,82.9375 Q319.6875,84 321.0313,84 Q321.6563,84 322.25,83.7344 Q322.8438,83.4531 323.4688,82.875 L323.4688,85.5938 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="68" x="334.5" y="84.1074">shared_ptr</text><rect fill="#FFFFFF" height="15.9688" style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" width="9" x="410.5" y="60.9531"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="7" x="411.5" y="73.0918">T</text><!--MD5=[d40932010816485ec57b44b6eea2392a]
class Observer--><rect fill="#FEFECE" filter="url(#f18yh8xu9tn665)" height="78.4141" id="Observer" style="stroke: #A80036; stroke-width: 1.5;" width="154" x="19" y="182.9531"/><ellipse cx="63.75" cy="198.9531" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M66.7188,204.5938 Q66.1406,204.8906 65.5,205.0313 Q64.8594,205.1875 64.1563,205.1875 Q61.6563,205.1875 60.3281,203.5469 Q59.0156,201.8906 59.0156,198.7656 Q59.0156,195.6406 60.3281,193.9844 Q61.6563,192.3281 64.1563,192.3281 Q64.8594,192.3281 65.5,192.4844 Q66.1563,192.6406 66.7188,192.9375 L66.7188,195.6563 Q66.0938,195.0781 65.5,194.8125 Q64.9063,194.5313 64.2813,194.5313 Q62.9375,194.5313 62.25,195.6094 Q61.5625,196.6719 61.5625,198.7656 Q61.5625,200.8594 62.25,201.9375 Q62.9375,203 64.2813,203 Q64.9063,203 65.5,202.7344 Q66.0938,202.4531 66.7188,201.875 L66.7188,204.5938 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="56" x="84.25" y="203.1074">Observer</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="20" x2="172" y1="214.9531" y2="214.9531"/><ellipse cx="30" cy="225.9531" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="113" x="39" y="229.1636">notify(event : Event)</text><ellipse cx="30" cy="238.7578" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="61" x="39" y="241.9683">Observer()</text><ellipse cx="30" cy="251.5625" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="128" x="39" y="254.7729">newPtr() : ObserverPtr</text><!--MD5=[c0bd9f44073f1a51428d87d6a9cf071b]
class Observable--><rect fill="#FEFECE" filter="url(#f18yh8xu9tn665)" height="99.2188" id="Observable" style="stroke: #A80036; stroke-width: 1.5;" width="275" x="23.5" y="320.9531"/><ellipse cx="121.75" cy="336.9531" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M124.7188,342.5938 Q124.1406,342.8906 123.5,343.0313 Q122.8594,343.1875 122.1563,343.1875 Q119.6563,343.1875 118.3281,341.5469 Q117.0156,339.8906 117.0156,336.7656 Q117.0156,333.6406 118.3281,331.9844 Q119.6563,330.3281 122.1563,330.3281 Q122.8594,330.3281 123.5,330.4844 Q124.1563,330.6406 124.7188,330.9375 L124.7188,333.6563 Q124.0938,333.0781 123.5,332.8125 Q122.9063,332.5313 122.2813,332.5313 Q120.9375,332.5313 120.25,333.6094 Q119.5625,334.6719 119.5625,336.7656 Q119.5625,338.8594 120.25,339.9375 Q120.9375,341 122.2813,341 Q122.9063,341 123.5,340.7344 Q124.0938,340.4531 124.7188,339.875 L124.7188,342.5938 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="70" x="142.25" y="341.1074">Observable</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="24.5" x2="297.5" y1="352.9531" y2="352.9531"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="31.5" y="360.9531"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="218" x="43.5" y="367.1636">observers : std::vector&lt;ObserverPtr&gt;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="24.5" x2="297.5" y1="373.7578" y2="373.7578"/><ellipse cx="34.5" cy="384.7578" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="73" x="43.5" y="387.9683">Observable()</text><ellipse cx="34.5" cy="397.5625" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="62" x="43.5" y="400.7729">fire() : void</text><ellipse cx="34.5" cy="410.3672" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="249" x="43.5" y="413.5776">addObserver(observer : ObserverPtr) : void</text><!--MD5=[ac13618b1a974308c1f12eb6c57723dc]
class Event--><rect fill="#FEFECE" filter="url(#f18yh8xu9tn665)" height="86.4141" id="Event" style="stroke: #A80036; stroke-width: 1.5;" width="236" x="6" y="36.9531"/><ellipse cx="102.25" cy="52.9531" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M105.2188,58.5938 Q104.6406,58.8906 104,59.0313 Q103.3594,59.1875 102.6563,59.1875 Q100.1563,59.1875 98.8281,57.5469 Q97.5156,55.8906 97.5156,52.7656 Q97.5156,49.6406 98.8281,47.9844 Q100.1563,46.3281 102.6563,46.3281 Q103.3594,46.3281 104,46.4844 Q104.6563,46.6406 105.2188,46.9375 L105.2188,49.6563 Q104.5938,49.0781 104,48.8125 Q103.4063,48.5313 102.7813,48.5313 Q101.4375,48.5313 100.75,49.6094 Q100.0625,50.6719 100.0625,52.7656 Q100.0625,54.8594 100.75,55.9375 Q101.4375,57 102.7813,57 Q103.4063,57 104,56.7344 Q104.5938,56.4531 105.2188,55.875 L105.2188,58.5938 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="35" x="122.75" y="57.1074">Event</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="241" y1="68.9531" y2="68.9531"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="76.9531"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="92" x="26" y="83.1636">id_ : std::int64_t</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="89.7578"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="130" x="26" y="95.9683">message_ : std::string</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="241" y1="102.5625" y2="102.5625"/><ellipse cx="17" cy="113.5625" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="210" x="26" y="116.7729">friend operator&lt;&lt;(...) : std::ostream</text><!--MD5=[deb427c714ce4cccb8ff967475ff9508]
class ObserverPtr--><rect fill="#FEFECE" filter="url(#f18yh8xu9tn665)" height="37.9375" id="ObserverPtr" style="stroke: #A80036; stroke-width: 1.5;" width="164" x="279" y="202.9531"/><ellipse cx="294" cy="221.9219" fill="#DA70D6" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M294.8438,228.6719 L292.3906,228.6719 L292.3906,218.4219 L289.25,218.4219 L289.25,216.2813 L297.9844,216.2813 L297.9844,218.4219 L294.8438,218.4219 L294.8438,228.6719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="76" x="307" y="219.0918">«type_alias»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="74" x="308" y="233.0605">ObserverPtr</text><rect fill="#FFFFFF" height="15.9688" style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" width="56" x="390" y="199.9531"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="54" x="391" y="212.0918">Observer</text><!--MD5=[a7c68e805ec01f19679095334506b73a]
reverse link std.shared_ptr to ObserverPtr--><path d="M361,115.9766 C361,143.5133 361,180.4065 361,202.6095 " fill="none" id="std.shared_ptr&lt;-ObserverPtr" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="354.0001,115.9663,361,95.9663,368.0001,115.9662,354.0001,115.9663" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[8f1f28d1170084f533ac276242fb3bb2]
reverse link Event to Observer--><path d="M114.4723,128.2722 C110.9746,146.0104 107.0608,165.8591 103.7392,182.7045 " fill="none" id="Event&lt;-Observer" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="115.4469,123.3294,109.7811,131.3854,114.4795,128.2349,117.63,132.9333,115.4469,123.3294" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[d499318c8d08153bce65ef70bdf39f35]
reverse link Event to Observable--><path d="M162.4447,127.4985 C173.5828,144.061 184.2764,163.412 190,182.9531 C203.3792,228.6311 192.4149,282.4818 180.3259,320.7256 " fill="none" id="Event&lt;-Observable" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="159.6061,123.3493,161.3866,133.0359,162.4293,127.476,167.9893,128.5187,159.6061,123.3493" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[e6113e973c416938d8c3ceed2dfc1918]
reverse link Observer to Observable--><path d="M115.1778,265.7671 C122.7383,283.0399 131.4621,302.9702 139.2557,320.7757 " fill="none" id="Observer&lt;-Observable" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="113.078,260.9697,113.0227,270.8184,115.083,265.5501,120.3513,267.6104,113.078,260.9697" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[07a7bc573a363a19f4bea53da2c56906]
@startuml

title **Observer pattern using Smart pointers**

set namespaceSeparator .
allowmixing

class Observer{
+notify(event : Event)
+Observer()
+{static} newPtr() : ObserverPtr
}
hide Observer attributes
class Observable {
- observers : std::vector<ObserverPtr>
+ Observable()
+ fire() : void
+ addObserver(observer : ObserverPtr) : void
}
class Event {
-id_ : std::int64_t
-message_ : std::string
+ friend operator<<(...) : std::ostream
}

class std.shared_ptr<T>
hide std.shared_ptr members
class ObserverPtr<Observer><<type_alias>><< (T, orchid) >>
hide ObserverPtr members
std.shared_ptr <|- - ObserverPtr


Event <- - Observer
Event <- - Observable
Observer <- - Observable

@enduml

PlantUML version 1.2020.06(Sun Apr 05 12:38:32 GMT 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 14-ea+33
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>